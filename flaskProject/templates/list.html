<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>栏目文章列表-聚繁</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='plugin/layui/css/layui.css') }}">
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
</head>
<body>
<header>
    <div class="layui-row subject-color nav-row">
        <div class="main-content nav-menu">
            <div class="layui-row">
                <div class="layui-col-md2 logo-box">
                    <a href="#" title="首页，聚繁分享">
                        <img src="/static/imgs/canreplace/logo.png" alt="logo">
                    </a>
                </div>
                <div class="layui-col-md7 menu-box">
                    <ul class="menu-ul">
                        <a href="/">
                            <li>首页</li>
                        </a>
                        <a href="#">
                            <li>文章列表</li>
                        </a>

                        <a href="#">
                            <li>关于博客</li>
                        </a>
                    </ul>
                </div>
                {% from"find.html" import find %}
                {{ find() }}
            </div>
        </div>
    </div>
</header>
<div class="main-content item-box">
    <div class="item-type">
        <div class="column-item layui-row">
            <div class="column-item-title layui-row subject-color font-color1 font-bold">栏目简介</div>
            <div class="jianjie-p layui-row">
                这是博客当前栏目的简介信息，此处是技术文章栏目，主要分享一些编程技术或者知识点，以及一些Exception和莫名其妙的文章。
            </div>
        </div>
        <div class="column-item layui-row">
            <div class="column-item-title layui-row subject-color font-color1 font-bold">栏目文章分类</div>
            <ul class="column-item-ul">
                {% for category in category_list %}
                    <a href="/list/{{ category[0] }}">
                        <li>{{ category[1] }}<span>{{ category[2] }}篇</span></li>
                    </a>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="item-list">
        <div class="list-param-sort layui-row">
            排序：<span><a href="/list/{{ cid }}/?page={{ page }}&order=1" class="chosen-sort">时间(默认)</a></span><span><a href="/list/{{ cid }}/?page={{ page }}&order=2">访问量</a></span><span><a
                href="/list/{{ cid }}/?page={{ page }}&order=3">评论数</a></span>
        </div>
        <ul class="article-ul">
            {% for article in pagination.items %}
                <li>
                    <div class="article-list-row layui-row">
                        <div class="article-li-title layui-row">
                            <h3 class="font-bold layui-elip"><a href="/content/{{ article.tid }}">{{ article.title }}</a></h3>
                        </div>
                        <div class="article-li-msg"><p>{{ article.description }}</p></div>
                        <div class="article-li-param layui-row">
                            {{ article.pub_date }}<span>阅读数：{{ article.hits }}</span><span>评论数：{{ article.replycount }}</span>
                        </div>
                    </div>
                </li>
            {% endfor %}

        </ul>
        <div class="page-box layui-row">
            <div id="pageItem>">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        {% if pagination.has_prev %}
                        <li class="page-item">
                            <a class="page-link" href="/list/{{ cid }}/?page={{ pagination.prev_num}}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        {% endif %}
                        {% for current in pagination.iter_pages() %}
                            {% if current==page %}
                                <li class="page-item active"><a class="page-link" href="/list/{{ cid }}/?page={{ current }}">{{ current }}</a></li>
                            {% else %}
                                <li class="page-item"><a class="page-link" href="/list/{{ cid }}/?page={{ current }}">{{ current }}</a></li>
                            {% endif %}
                        {% endfor %}
                        {% if pagination.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="/list/{{ cid }}/?page={{ pagination.next_num}}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        {% else %}
                         <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                         </li>
                        {% endif %}
                    </ul>
                </nav>
        </div>
    </div>
</div>
<footer>
    <div class="footer-box">
        <div class="main-content">
            <strong>Copyright</strong> &nbsp;2019.01.16 &nbsp;by &nbsp;<a href="#">大BUG</a><span>备案号：<a
                href="http://www.miitbeian.gov.cn/" target="_blank">蜀ICP备16031990号-2</a></span>
        </div>
    </div>
</footer>
<script src="/static/plugin/layui/layui.js"></script>
<script>
    layui.use('laypage', function () {
        var laypage = layui.laypage;

        //执行一个laypage实例
        laypage.render({
            elem: 'pageItem', //注意，这里的 test1 是 ID，不用加 # 号
            count: 50, //数据总数，从服务端得到
            jump: function (obj, first) {
                //obj包含了当前分页的所有参数，比如：
                console.log('当前页数：' + obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                console.log('每页数量：' + obj.limit); //得到每页显示的条数
                //首次不执行
                if (!first) {
                    console.log('执行')
                }
            }
        });
    });
</script>
</body>
</html>